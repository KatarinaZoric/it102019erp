{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mmaksimovic\\\\Desktop\\\\ERP\\\\it102019erp\\\\erp-front\\\\src\\\\pages\\\\Category.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport Header from '../components/Header';\nimport ProductList from '../components/ProductList';\nimport ProductService from '../services/ProductService';\nimport ProducCategorytService, { ProductCategoryService } from '../services/ProductCategoryService';\nimport { useParams } from 'react-router';\nimport PplCategoryService from '../services/PplCategoryService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Category(props) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [unfilteredProducts, setUnfilteredProducts] = useState([]);\n  const [productCategories, setProductCategories] = useState([]);\n  const [pplCategories, setPplCategories] = useState([]);\n  const [currentCategory, setCurrentCategory] = useState(\"\");\n  const {\n    categoryId\n  } = useParams();\n  useEffect(() => {\n    changeProductList(categoryId);\n  }, [categoryId]);\n  useEffect(() => {\n    Promise.all([ProducCategorytService.getCategores(), PplCategoryService.getPpls()]).then(_ref => {\n      let [productCategories, pplCategories] = _ref;\n      setProductCategories(productCategories);\n      setPplCategories(pplCategories);\n    }).catch(console.error);\n  }, []);\n  function changeProductList(category) {\n    Promise.all([ProductService.getProductByCategory(category), ProductCategoryService.getCategoryById(category)]).then(_ref2 => {\n      let [products, category] = _ref2;\n      setUnfilteredProducts(products);\n      setProducts(products);\n      setCurrentCategory(category.name);\n    }).catch(console.error);\n  }\n  const filterProductsByPpl = pplId => {\n    let tmpProducts = [...unfilteredProducts];\n    let filteredProducts = [];\n    tmpProducts.forEach(product => {\n      if (product.pplCategories !== null) {\n        product.pplCategories.forEach(pplCategory => {\n          if (pplCategory.pplCategoryID === pplId) {\n            filteredProducts.push(product);\n          }\n        });\n      }\n    });\n    setProducts(filteredProducts);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"text-center\",\n      children: currentCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"position-sticky col-12 col-lg-2 py-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"list-group\",\n            children: pplCategories.map(pplCategory => {\n              return /*#__PURE__*/_jsxDEV(\"a\", {\n                onClick: () => filterProductsByPpl(pplCategory.pplCategoryID),\n                className: \"list-group-item list-group-item-action\",\n                children: pplCategory.name\n              }, \"pplFilter\" + pplCategory.pplCategoryID, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 26\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-10\",\n          children: /*#__PURE__*/_jsxDEV(ProductList, {\n            addToCart: props.addToCart,\n            products: products,\n            productCategories: productCategories,\n            pplCategories: pplCategories\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 7\n  }, this);\n}\n_s(Category, \"O+rIgu/GkGMkPI5tOSeVULKsw28=\", false, function () {\n  return [useParams];\n});\n_c = Category;\nexport default Category;\nvar _c;\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["React","useEffect","useState","Header","ProductList","ProductService","ProducCategorytService","ProductCategoryService","useParams","PplCategoryService","jsxDEV","_jsxDEV","Category","props","_s","products","setProducts","unfilteredProducts","setUnfilteredProducts","productCategories","setProductCategories","pplCategories","setPplCategories","currentCategory","setCurrentCategory","categoryId","changeProductList","Promise","all","getCategores","getPpls","then","_ref","catch","console","error","category","getProductByCategory","getCategoryById","_ref2","name","filterProductsByPpl","pplId","tmpProducts","filteredProducts","forEach","product","pplCategory","pplCategoryID","push","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","onClick","addToCart","_c","$RefreshReg$"],"sources":["C:/Users/mmaksimovic/Desktop/ERP/it102019erp/erp-front/src/pages/Category.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport {useState} from 'react'\r\nimport Header from '../components/Header'\r\nimport ProductList from '../components/ProductList'\r\nimport ProductService from '../services/ProductService'\r\nimport ProducCategorytService, { ProductCategoryService } from '../services/ProductCategoryService'\r\nimport { useParams } from 'react-router'\r\nimport PplCategoryService from '../services/PplCategoryService'\r\n\r\nfunction Category(props) {\r\n\r\n    const [products, setProducts] = useState([])\r\n    const [unfilteredProducts, setUnfilteredProducts] = useState([])\r\n    const [productCategories, setProductCategories] = useState([])\r\n    const [pplCategories, setPplCategories] = useState([])\r\n    const [currentCategory, setCurrentCategory] = useState(\"\")\r\n    const {categoryId} = useParams();\r\n\r\n    useEffect(() => {\r\n      changeProductList(categoryId)\r\n    }, [categoryId])\r\n\r\n    useEffect(() => {\r\n      Promise.all([\r\n        ProducCategorytService.getCategores(),\r\n        PplCategoryService.getPpls()\r\n      ])\r\n      .then(([productCategories, pplCategories]) => {\r\n        setProductCategories(productCategories)\r\n        setPplCategories(pplCategories)\r\n      })\r\n      .catch(console.error)\r\n    }, [])\r\n\r\n    function changeProductList(category) {\r\n      Promise.all([\r\n        ProductService.getProductByCategory(category),\r\n        ProductCategoryService.getCategoryById(category)\r\n      ])\r\n      .then(([products, category]) => {\r\n        setUnfilteredProducts(products)\r\n        setProducts(products);\r\n        setCurrentCategory(category.name);\r\n      })\r\n      .catch(console.error)\r\n    }\r\n\r\n    const filterProductsByPpl = (pplId) => {\r\n      let tmpProducts = [...unfilteredProducts]\r\n      let filteredProducts = []\r\n\r\n      tmpProducts.forEach(product => {\r\n        if (product.pplCategories !== null) {\r\n          product.pplCategories.forEach(pplCategory => {\r\n            if (pplCategory.pplCategoryID === pplId) {\r\n              filteredProducts.push(product)\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      setProducts(filteredProducts)\r\n    }\r\n\r\n    return(\r\n      <div>\r\n        <Header/>\r\n        <h5 className=\"text-center\">{currentCategory}</h5>\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"position-sticky col-12 col-lg-2 py-5\">\r\n              <div className=\"list-group\">\r\n                {pplCategories.map(pplCategory => {\r\n                  return <a key={\"pplFilter\" + pplCategory.pplCategoryID} onClick={() => filterProductsByPpl(pplCategory.pplCategoryID)} className=\"list-group-item list-group-item-action\">{pplCategory.name}</a>\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-12 col-lg-10\">\r\n              <ProductList\r\n                addToCart={props.addToCart}\r\n                products={products}\r\n                productCategories={productCategories}\r\n                pplCategories={pplCategories}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Category;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}